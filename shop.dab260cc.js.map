{"version":3,"sources":["shop.ts"],"names":[],"mappings":";AAAA,eAAe,EAAK,GACZ,MAAA,QAAiB,MACrB,uDACA,CACE,OAAQ,SAGR,GAAA,EAAU,CACN,MAAA,SAAc,EAAS,QAAhB,KACb,OAAO,SAAS,KAAkI,2HAAA,OAAA,EAAkB,aAAA,OAAA,EAAiF,8EAAA,OAAA,IAIzP,eAAe,EAAM,GACb,MAAA,EAAU,YAAY,UACpB,MAAA,QAAiB,MAC2B,gDAAA,OAAA,IAE9C,GAAA,EAAU,CACN,MAAA,QAAa,EAAS,OAC3B,SAAS,eACR,QACqB,YAAyB,WAAA,OAAA,EAA6B,0BAAA,OAAA,EAAI,WACjF,cAAc,KAEf,KAGL,WACQ,MAAA,EAAO,OAAO,SAAS,KAEvB,EADM,IAAI,IAAI,GACH,aAAa,IAAI,QAC9B,SACI,EAAM,IALhB,GASA,OAAO,KAAO","file":"shop.dab260cc.js","sourceRoot":"../demo","sourcesContent":["async function shop(amount: string) {\n  const response = await fetch(\n    'https://web-proxy.celer.app/merchant/generateinvoice',\n    {\n      method: 'POST'\n    }\n  );\n  if (response) {\n    const memo = (await response.json())['Memo'];\n    window.location.href = `https://celer-network.github.io/celer-web-wallet/index.html?recipient=0x6fb7a37b3a8a2861eeb3e02e60b682dcd2d3c005&amount=${amount}&invoice=${memo}&redirect=https://celer-network.github.io/celer-web-wallet/shop.html?paid=${memo}`;\n  }\n}\n\nasync function check(paid: string) {\n  const checker = setInterval(async () => {\n    const response = await fetch(\n      `https://web-proxy.celer.app/merchant/payment/${paid}`\n    );\n    if (response) {\n      const json = await response.json();\n      (document.getElementById(\n        'paid'\n      ) as HTMLInputElement).textContent = `Invoice ${paid} paid with payment ID ${json['paymentId']}`;\n      clearInterval(checker);\n    }\n  }, 1000);\n}\n\n(async () => {\n  const href = window.location.href;\n  const url = new URL(href);\n  const paid = url.searchParams.get('paid');\n  if (paid) {\n    await check(paid);\n  }\n})();\n\nwindow.shop = shop;\n"]}
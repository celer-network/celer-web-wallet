(this["webpackJsonpceler-web-wallet"]=this["webpackJsonpceler-web-wallet"]||[]).push([[0],{100:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=100},110:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),l=n(22),o=n.n(l),i=(n(82),n(9)),s=(n(83),n(19)),u=n(27),m={client:void 0,setClient:function(){}},p=c.a.createContext(m),d=n(141),f=n(135),E=n(8),b=n.n(E),h=n(16),v=n(21),x=n(38),y=n(66),g=(Object(y.a)({palette:{primary:x.a,secondary:x.a}}),"Helvetica Neue, Helvetica, Lucida Grande, Segoe UI, sans-serif");!function(e){e[e.IDLE=0]="IDLE",e[e.PROCESSING=1]="PROCESSING",e[e.SUCCEEDED=2]="SUCCEEDED",e[e.FAILED=3]="FAILED"}(a||(a={}));var w=n(139),k=function(e){return c.a.createElement(w.a,Object.assign({style:{marginTop:"1em"}},e))},O=n(130),C=n(31),j=n(1),D=n(140);function T(){var e=Object(C.a)(["\n  font-family: ",";\n  && {\n    color: #ffffff;\n    background-color: #000000;\n    border-radius: 12px;\n  }\n  height: 40px;\n  min-height: 40px;\n  width: 336px;\n  max-width: 336px;\n  text-transform: none;\n\n  &:hover {\n    background-color: #616161;\n  }\n"]);return T=function(){return e},e}var S=Object(j.c)(O.a)(T(),g),A=function(e){return c.a.createElement(D.b,{injectFirst:!0},c.a.createElement(S,Object.assign({variant:"contained",color:"primary",size:"medium"},e)))},I=n(10),F=function(e){return c.a.createElement(I.a,Object.assign({style:{marginTop:"1em",position:"fixed",left:"50%",marginRight:"-50%",transform:"translate(-50%, 0%)"},flexDirection:"column",alignItems:e.alignItems?e.alignItems:"center",width:"25%"},e))},P=n(131),R=n(56),L=function(e){return c.a.createElement(I.b,Object.assign({color:e.color?e.color:"#8E8E93",fontFamily:g,fontSize:"16px",letterSpacing:"0.19px",lineHeight:"19px",textAlign:e.textAlign?e.textAlign:"center"},e))},N=function(e){return c.a.createElement(I.b,Object.assign({color:"#000000",fontFamily:g,fontWeight:e.fontWeight?e.fontWeight:"bold",fontSize:"16px",letterSpacing:"0.19px"},e))},W=function(e){var t=e.title,n=e.prompt,a=Object(u.f)();return c.a.createElement(F,null,c.a.createElement(N,null,t),c.a.createElement(k,null,c.a.createElement(R.a,null)),c.a.createElement(L,{marginTop:"1em"},n),c.a.createElement(k,null,c.a.createElement(P.a,{onClick:function(){a.replace("/")}},c.a.createElement(I.b,{fontFamily:g},"Back home"))))},U=n(132),H=n(133),J=function(e){var t=e.text,n=e.close;return c.a.createElement(w.a,{width:"336px",bgcolor:"#219DDB",alignItems:"center"},c.a.createElement(I.a,null,c.a.createElement(L,{color:"#FFFFFF",width:"90%",marginTop:"15px",marginLeft:"45px"},t),c.a.createElement(U.a,{onClick:n},c.a.createElement(H.a,null))))},G=n(134),B=function(e){var t=e.title,n=e.prompt;return c.a.createElement(F,null,c.a.createElement(N,null,t),c.a.createElement(k,null,c.a.createElement(G.a,null)),c.a.createElement(L,{marginTop:"1em"},n))},z=n(57),K=function(e){var t=e.title,n=e.doneCallback;return c.a.createElement(F,null,c.a.createElement(N,null,t),c.a.createElement(k,null,c.a.createElement(z.a,null)),c.a.createElement(A,{style:{marginTop:"2em"},onClick:n},"Done"))},Q=function(){var e=Object(r.useContext)(p).client,t=Object(u.f)(),n=t.location.state,l=n&&n.tokenType,o=n&&n.tokenAddress,s=Object(r.useState)(""),m=Object(i.a)(s,2),E=m[0],x=m[1],y=Object(r.useState)(a.IDLE),g=Object(i.a)(y,2),w=g[0],O=g[1],C=Object(r.useState)(""),j=Object(i.a)(C,2),D=j[0],T=j[1];if(!e||!l||!o)return t.replace("/"),null;var S=function(){var t=Object(h.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.openPaymentChannel("ETH"===l?v.TokenType.ETH:v.TokenType.ERC20,o,E,E),O(a.PROCESSING),t.prev=2,t.next=5,n;case 5:O(a.SUCCEEDED),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),T(t.t0.toString()),O(a.FAILED);case 12:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(){return t.apply(this,arguments)}}(),I=c.a.createElement(F,null,c.a.createElement(k,null,c.a.createElement(J,{text:"Activate",close:function(){t.replace("/tokens")}}),c.a.createElement(N,{marginTop:"1em"},"Initial deposit"),c.a.createElement(d.a,{style:{marginTop:"1em",width:"100%"},labelWidth:0,onChange:function(e){return x(e.target.value)},endAdornment:c.a.createElement(f.a,{position:"end"},"wei"),inputProps:{"aria-label":"amount"}}),c.a.createElement(L,{textAlign:"left"},"Deposit to activate Celer Pay")),c.a.createElement(A,{style:{marginTop:"2em"},onClick:S},"Done")),P=c.a.createElement(B,{title:"Activating",prompt:"Do not close your window until activation is complete"}),R=c.a.createElement(K,{title:"Activate succeeded",doneCallback:function(){return t.replace("/tokens")}}),U=c.a.createElement(W,{title:"Activate failed",prompt:D});switch(w){case a.IDLE:return I;case a.PROCESSING:return P;case a.SUCCEEDED:return R;case a.FAILED:return U}},V=n(58),_=n(59),M=n(60),$=n(61),q=n(62),X=n(63),Y=n(64),Z=function(){var e=Object(r.useContext)(p),t=e.client,n=e.setClient,a=Object(u.f)();if(t)return a.replace("/tokens"),null;var l=function(){var e=Object(h.a)(b.a.mark((function e(){var t,r,c,l,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof window.ethereum||"undefined"!==typeof window.web3){e.next=2;break}return e.abrupt("return");case 2:if(!window.ethereum){e.next=6;break}return window.ethereum.autoRefreshOnNetworkChange=!1,e.next=6,window.ethereum.enable();case 6:return t=new V.ethers.providers.Web3Provider(window.ethereum||window.web3.currentProvider),e.next=9,t.getNetwork();case 9:l=e.sent,e.t0=l.name,e.next="homestead"===e.t0?13:"ropsten"===e.t0?16:19;break;case 13:return r=$,c=q,e.abrupt("break",21);case 16:return r=X,c=Y,e.abrupt("break",21);case 19:r=_,c=M;case 21:return e.next=23,v.Celer.create(window.ethereum||window.web3.currentProvider,0,c,r);case 23:o=e.sent,n(o),a.replace("/tokens");case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(F,null,c.a.createElement(k,null,c.a.createElement(L,{width:"272px"},"This website would like to connect your Celer Pay account")),c.a.createElement(k,null,c.a.createElement(A,{onClick:l},"Connect wallet")))},ee=function(){var e=Object(r.useContext)(p).client,t=Object(u.f)(),n=t.location.state,l=n&&n.channelId,o=n&&n.tokenType,s=n&&n.tokenAddress,m=Object(r.useState)(""),E=Object(i.a)(m,2),x=E[0],y=E[1],g=Object(r.useState)(a.IDLE),O=Object(i.a)(g,2),C=O[0],j=O[1],D=Object(r.useState)(""),T=Object(i.a)(D,2),S=T[0],I=T[1];if(!e||!l||!o||!s)return t.replace("/"),null;var P=function(){var t=Object(h.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.deposit(l,"ETH"===o?v.TokenType.ETH:v.TokenType.ERC20,x),j(a.PROCESSING),t.prev=2,t.next=5,n;case 5:j(a.SUCCEEDED),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),I(t.t0.toString()),j(a.FAILED);case 12:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(){return t.apply(this,arguments)}}(),R=c.a.createElement(F,null,c.a.createElement(k,null,c.a.createElement(J,{text:"Deposit",close:function(){t.replace("/tokens")}}),c.a.createElement(N,{marginTop:"1em"},"Amount"),c.a.createElement(d.a,{style:{marginTop:"1em",width:"100%"},labelWidth:0,onChange:function(e){return y(e.target.value)},endAdornment:c.a.createElement(f.a,{position:"end"},"wei"),inputProps:{"aria-label":"amount"}})),c.a.createElement(w.a,{marginTop:"2em"},c.a.createElement(A,{onClick:P},"Done"))),L=c.a.createElement(B,{title:"Depositing",prompt:"Do not close your window until deposit is complete"}),U=c.a.createElement(K,{title:"Deposit succeeded",doneCallback:function(){return t.replace("/token/".concat(s))}}),H=c.a.createElement(W,{title:"Deposit failed",prompt:S});switch(C){case a.IDLE:return R;case a.PROCESSING:return L;case a.SUCCEEDED:return U;case a.FAILED:return H}},te=function(){var e=Object(r.useContext)(p).client,t=Object(u.f)(),n=t.location.state.tokenType,a=t.location.state.tokenAddress,l=Object(r.useState)(""),o=Object(i.a)(l,2),s=o[0],m=o[1],E=Object(r.useState)(""),x=Object(i.a)(E,2),y=x[0],g=x[1];if(!e||!n||!a)return t.replace("/"),null;var w=function(){var r=Object(h.a)(b.a.mark((function r(){return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.sendPayment("ETH"===n?v.TokenType.ETH:v.TokenType.ERC20,a,s,y);case 2:t.replace("/tokens");case 3:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return c.a.createElement(F,null,c.a.createElement(k,null,c.a.createElement(J,{text:"Send",close:function(){t.replace("/tokens")}}),c.a.createElement(N,{marginTop:"1em"},"Destination address"),c.a.createElement(d.a,{style:{marginTop:"1em",width:"100%"},labelWidth:0,onChange:function(e){return m(e.target.value)},inputProps:{"aria-label":"destination"}}),c.a.createElement(N,{marginTop:"1em"},"Amount"),c.a.createElement(d.a,{style:{marginTop:"1em",width:"100%"},labelWidth:0,onChange:function(e){return g(e.target.value)},endAdornment:c.a.createElement(f.a,{position:"end"},"wei"),inputProps:{"aria-label":"amount"}})),c.a.createElement(A,{style:{marginTop:"2em"},onClick:w},"Done"))},ne=n(136),ae=function(e){var t=e.symbol,n=Object(u.f)();return c.a.createElement(w.a,{width:"336px",bgcolor:"#219DDB",alignItems:"center"},c.a.createElement(I.a,null,c.a.createElement(U.a,{onClick:function(){return n.replace("/tokens")}},c.a.createElement(ne.a,null)),c.a.createElement(L,{color:"#FFFFFF",width:"100%",marginTop:"15px",marginLeft:"-45px"},t)))};function re(){var e=Object(C.a)(["\n  height: 28px;\n  width: 84px;\n  && {\n    color: #ffffff;\n    border-radius: 14px;\n    background-color: #1281ff;\n    margin-top: 1em;\n    margin-left: 1em;\n    margin-right: 1em;\n  }\n  text-transform: none;\n\n  &:hover {\n    background-color: #90caf9;\n  }\n"]);return re=function(){return e},e}var ce=Object(j.c)(O.a)(re()),le=function(){var e=Object(u.f)(),t=e.location.state,n=t&&t.channelId,a=t&&t.tokenType,r=t&&t.tokenSymbol,l=t&&t.tokenAddress;return n&&a&&r&&l?c.a.createElement(F,null,c.a.createElement(ae,{symbol:r}),c.a.createElement(I.a,null,c.a.createElement(D.b,{injectFirst:!0},c.a.createElement(ce,{onClick:function(){return e.replace("/deposit",{channelId:n,tokenType:a,tokenSymbol:r,tokenAddress:l})}},"Deposit")),c.a.createElement(D.b,{injectFirst:!0},c.a.createElement(ce,{onClick:function(){return e.replace("/withdraw",{channelId:n,tokenType:a,tokenSymbol:r,tokenAddress:l})}},"Withdraw")),c.a.createElement(D.b,{injectFirst:!0},c.a.createElement(ce,{onClick:function(){return e.replace("/send",{channelId:n,tokenType:a,tokenSymbol:r,tokenAddress:l})}},"Send")))):(e.replace("/"),null)},oe=n(138),ie=n(143),se=n(137);function ue(){var e=Object(C.a)(["\n  height: 28px;\n  width: 64px;\n  border-radius: 14px;\n  background-color: #1281ff;\n  text-transform: none;\n\n  &:hover {\n    background-color: #90caf9;\n  }\n"]);return ue=function(){return e},e}var me=Object(j.c)(O.a)(ue()),pe=function(e){var t=e.client,n=e.tokenDisplayInfo,a=Object(r.useState)(!0),l=Object(i.a)(a,2),o=l[0],s=l[1],m=Object(r.useState)(""),p=Object(i.a)(m,2),d=p[0],f=p[1],E=Object(r.useState)({activated:!1,balance:"0"}),v=Object(i.a)(E,2),x=v[0],y=v[1],w=Object(u.f)();Object(r.useEffect)((function(){var e=function(){var e=Object(h.a)(b.a.mark((function e(){var a,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAllPaymentChannelIdsForToken(n.address);case 2:if(a=e.sent,s(!1),0!==a.length){e.next=8;break}y({activated:!1,balance:"0"}),e.next=14;break;case 8:return r=a[0],f(r),e.next=12,t.getPaymentChannelInfo(r);case 12:c=e.sent,y({activated:!0,balance:c.balance.freeSendingCapacity});case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e();var a=setInterval((function(){return e()}),1e3);return function(){return clearInterval(a)}}),[t,n.address]);var k,O=function(){var e=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w.replace("/activate",{tokenType:n.type,tokenAddress:n.address});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();k=o?c.a.createElement(L,null,"Loading"):x.activated?c.a.createElement(L,{textAlign:"right",minWidth:"250px"},x.balance+" wei"):c.a.createElement(D.b,{injectFirst:!0},c.a.createElement(me,{onClick:O},c.a.createElement(I.b,{fontFamily:g,fontSize:"12px",color:"#FFFFFF"},"Activate")));return c.a.createElement(ie.a,{divider:!0,onClick:function(){x.activated&&w.replace("/token/".concat(n.address),{channelId:d,tokenType:n.type,tokenAddress:n.address,tokenSymbol:n.symbol})}},c.a.createElement(se.a,{style:{margin:"8px"},alt:n.name,src:n.iconUrl}),c.a.createElement(I.a,{minWidth:"100px",flexDirection:"column"},c.a.createElement(N,{fontWeight:"normal"},n.name),c.a.createElement(L,{textAlign:"left"},n.symbol)),k)},de=n(65),fe=function(){var e=Object(r.useContext)(p).client,t=Object(u.f)(),n=[];if(!e)return t.replace("/"),null;var a=!0,l=!1,o=void 0;try{for(var i,s=de[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var m=i.value;n.push({name:m.name,type:m.type,address:m.address,symbol:m.symbol,iconUrl:m.iconUrl})}}catch(d){l=!0,o=d}finally{try{a||null==s.return||s.return()}finally{if(l)throw o}}return c.a.createElement(F,{alignItems:"left"},c.a.createElement(N,{left:"25%"},"Available tokens"),c.a.createElement(oe.a,null,n.map((function(t,n){return c.a.createElement(pe,{key:n,client:e,tokenDisplayInfo:t})}))))},Ee=function(){var e=Object(r.useContext)(p).client,t=Object(u.f)(),n=t.location.state,l=n&&n.channelId,o=Object(r.useState)(""),s=Object(i.a)(o,2),m=s[0],E=s[1],v=Object(r.useState)(a.IDLE),x=Object(i.a)(v,2),y=x[0],g=x[1],w=Object(r.useState)(""),O=Object(i.a)(w,2),C=O[0],j=O[1];if(!e||!l)return t.replace("/"),null;var D=function(){var t=Object(h.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.cooperativeWithdraw(l,m),g(a.PROCESSING),t.prev=2,t.next=5,n;case 5:g(a.SUCCEEDED),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),j(t.t0.toString()),g(a.FAILED);case 12:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(){return t.apply(this,arguments)}}(),T=c.a.createElement(F,null,c.a.createElement(k,null,c.a.createElement(J,{text:"Withdraw",close:function(){t.replace("/tokens")}}),c.a.createElement(N,{marginTop:"1em"},"Amount"),c.a.createElement(d.a,{style:{marginTop:"1em",width:"100%"},labelWidth:0,onChange:function(e){return E(e.target.value)},endAdornment:c.a.createElement(f.a,{position:"end"},"wei"),inputProps:{"aria-label":"amount"}})),c.a.createElement(A,{style:{marginTop:"2em"},onClick:D},"Done")),S=c.a.createElement(B,{title:"Withdrawing",prompt:"Do not close your window until withdrawal is complete"}),I=c.a.createElement(K,{title:"Withdraw succeeded",doneCallback:function(){return t.replace("/tokens")}}),P=c.a.createElement(W,{title:"Withdraw failed",prompt:C});switch(y){case a.IDLE:return T;case a.PROCESSING:return S;case a.SUCCEEDED:return I;case a.FAILED:return P}},be=function(){var e=Object(r.useState)(void 0),t=Object(i.a)(e,2),n=t[0],a=t[1];return c.a.createElement(p.Provider,{value:{client:n,setClient:a}},c.a.createElement(s.a,null,c.a.createElement(u.c,null,c.a.createElement(u.a,{path:"/connect"},c.a.createElement(Z,null)),c.a.createElement(u.a,{path:"/tokens"},c.a.createElement(fe,null)),c.a.createElement(u.a,{path:"/token/:address"},c.a.createElement(le,null)),c.a.createElement(u.a,{path:"/activate"},c.a.createElement(Q,null)),c.a.createElement(u.a,{path:"/send"},c.a.createElement(te,null)),c.a.createElement(u.a,{path:"/deposit"},c.a.createElement(ee,null)),c.a.createElement(u.a,{path:"/withdraw"},c.a.createElement(Ee,null)),c.a.createElement(u.a,{path:"/",children:function(){return n?c.a.createElement(fe,null):c.a.createElement(Z,null)}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},59:function(e){e.exports=JSON.parse('{"paymentChannelOpenTimeout":100,"paymentChannelDisputeTimeout":10,"paymentResolutionDisputeTimeout":10,"defaultPaymentTimeout":50,"maxPendingPayments":200,"ethJsonRpcUrl":"http://localhost:8545","ospEthAddress":"0x6a6d2a97da1c453a4e099e8054865a0a59728863","ospNetworkAddress":"http://localhost:29980"}')},60:function(e){e.exports=JSON.parse('{"celerLedgerAddress":"0x0120812110a089b49bdc5a68d61ee7213a2e2c94","celerWalletAddress":"0xaf2438c82578cc1065661dc7ac8173382f600279","payRegistryAddress":"0x8517f998dfbbcc1b8fe914c050634fa65f093bf8","payResolverAddress":"0x8555ae269b34db4317074962ef4e4aed84d5aa2e","virtContractResolverAddress":"0x1db16b1d27b10edb9282df6650f48cf8576a84e7"}')},61:function(e){e.exports=JSON.parse('{"paymentChannelOpenTimeout":100,"paymentChannelDisputeTimeout":10,"paymentResolutionDisputeTimeout":10,"defaultPaymentTimeout":50,"maxPendingPayments":200,"ethJsonRpcUrl":"https://eth-mainnet.alchemyapi.io/jsonrpc/nBKDB3Ft5jAa-VmtGnrKtVpQ8u8eIgQ2","ospEthAddress":"0x33ebbb1d4d21e8626c4144ed737989c7532eb588","ospNetworkAddress":"https://web-proxy-mainnet.celer.app"}')},62:function(e){e.exports=JSON.parse('{"celerLedgerAddress":"0x4f7f56d57607e346ff8719c9f34cba3bbccae71f","celerWalletAddress":"0xa6cd930fc92f1634d8183af2fb86bd1766f2f82a","payRegistryAddress":"0x791bedaa0dd173142311005bb65b58c284cc948c","payResolverAddress":"0x273456f8fe06f9d58f2480b7aeaa710a4a6abfc1","virtContractResolverAddress":"0xad3e2ea53122d7d94df2deb5def84c86449fb7f4"}')},63:function(e){e.exports=JSON.parse('{"paymentChannelOpenTimeout":100,"paymentChannelDisputeTimeout":10,"paymentResolutionDisputeTimeout":10,"defaultPaymentTimeout":50,"maxPendingPayments":200,"ethJsonRpcUrl":"https://eth-ropsten.alchemyapi.io/jsonrpc/nBKDB3Ft5jAa-VmtGnrKtVpQ8u8eIgQ","ospEthAddress":"0x4bace345c30d9244b71218dc6ca694836138b60e","ospNetworkAddress":"https://web-proxy.celer.app"}')},64:function(e){e.exports=JSON.parse('{"celerLedgerAddress":"0x4b7a6ee1128ff88b21cc4c6359164b21d671fa31","celerWalletAddress":"0xf78260599ad3225f8c33f665cac1c60501c6b934","payRegistryAddress":"0xa12063ab2136abbab09e036a260694fbd5e57982","payResolverAddress":"0x605703f2c26aa67c4e63a27e5ace6ad2862bb53a","virtContractResolverAddress":"0xff57cc84acf5301f5d35c6b14ac1697b550fb9f0"}')},65:function(e){e.exports=JSON.parse('[{"name":"Ether","type":"ETH","symbol":"ETH","address":"0x0000000000000000000000000000000000000000","decimal":18,"iconUrl":"https://get.celer.app/mobile-app/res/ETH.png","receivingCap":"20000000000000000000","depositLimits":{"minDeposit":"50000000000000000","maxDeposit":"500000000000000000","maxRatio":1}}]')},77:function(e,t,n){e.exports=n(110)},82:function(e,t,n){},83:function(e,t,n){}},[[77,1,2]]]);
//# sourceMappingURL=main.4d7709e9.chunk.js.map